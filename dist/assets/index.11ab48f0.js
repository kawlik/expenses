import{r as d,j as e,a as k,F as u,b as r,d as C,c as S,e as I,f as D,g as E,h as F,i as $,k as M,l as W,m as q,R as O,n as U}from"./vendor.ee96b789.js";const T=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}};T();var o={API:{host:"https://expenses-kawlik.herokuapp.com",auth:{facebook:"https://expenses-kawlik.herokuapp.com/auth/facebook"},link:{expense:{get:{findAllBy_listID:"/expense/list/"},post:{addNewBy_listID:"/expense/add/"},put:{argueBy_expenseID:"/expense/argue/"}},list:{get:{findAllBy_userID:"/list/all/"},post:{addNewBy_userID:"/list/add/"},put:{lockBy_listID:"/list/locl/"}},user:{get:{findOneBy_auth:"/user/auth/",findAllBy_name:"/user/name/",findOneBy_userID:"/user/id/"},put:{addNewAsFriendBy_userID:"/user/add/",romoveUserAsFriend_userID:"/user/remove/"}}}},views:{list:["saved","active","profile"],name:{saved:"saved",active:"active",profile:"profile"}}};const f=d.exports.createContext(null),Z=({children:t})=>{const[i,a]=d.exports.useState(null),[n,s]=d.exports.useState(null),l={user:i,setUser:a,list:n,setList:s};return d.exports.useEffect(()=>()=>{},[]),e(f.Provider,{value:l,children:t})},z=(t,i="")=>o.API.host+t+i,N=async(t,i)=>{try{const a=await k.get(z(t,i)),n=a==null?void 0:a.data;if(n==null?void 0:n.success)return n.response;throw new Error("Request could not be processed!")}catch(a){return console.error(a),null}},Y=async(t,i,a)=>{try{const n=await k.post(z(t,i),a),s=n==null?void 0:n.data;if(s==null?void 0:s.success)return s.response;throw new Error("Request could not be processed!")}catch(n){return console.error(n),null}},L=async(t,i,a)=>{try{const n=await k.put(z(t,i),a),s=n==null?void 0:n.data;if(s==null?void 0:s.success)return s.response;throw new Error("Request could not be processed!")}catch(n){return console.error(n),null}},_=async t=>{try{const i=[];for(const a of t.friends){const n=await N(o.API.link.user.get.findOneBy_userID,a);i.push(n)}return i}catch(i){return console.error(i),null}},H=()=>{const{setUser:t,setList:i}=d.exports.useContext(f),a=async n=>{try{const s=await N(o.API.link.user.get.findOneBy_auth,n);if(n===(s==null?void 0:s.auth)){s.friends=await _(s);const l=await N(o.API.link.list.get.findAllBy_userID,s._id);t(s),i(l)}}catch(s){return console.error(s)}};return d.exports.useEffect(()=>{const n=new URL(window.location.href),s=new URLSearchParams(n.search);s.has("auth")&&a(s.get("auth")),window.history.replaceState(null,document.title,window.location.pathname)},[]),e(u,{children:e("div",{className:"modal modal-signin position-static d-block bg-light py-5",children:e("div",{className:"modal-dialog",children:e("div",{className:"modal-content shadow",style:{borderRadius:"15px"},children:r("div",{className:"modal-body p-4",children:[e("h2",{className:"fw-bold p-2 mb-4",children:"Logowanie"}),r("a",{href:o.API.auth.facebook,className:"w-100 btn btn-lg btn-outline-primary mb-2",type:"button",style:{borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(C,{style:{fontSize:"32px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Zaloguj z Facebook"})]}),e("hr",{className:"mb-3"}),e("small",{className:"text-muted",children:"Do zalogowania si\u0119 konieczne jest skorzystanie z wybranego serwisu spo\u0142eczno\u015Bciowego. Korzystanie z takiej metody logowania zwi\u0119ksza bezpiecze\u0144stwo i zmniejsza ilo\u015B\u0107 koniecznych do zapami\u0119tania hase\u0142."})]})})})})})},P=({user:t,action:i})=>e(u,{children:r("li",{className:"list-group-item",style:{borderRadius:"10px"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:t.body.name}),e("button",{type:"button",className:"btn btn-outline-success py-1 px-3",onClick:a=>i(a,t._id),style:{borderRadius:"10px",float:"right"},children:e(S,{style:{verticalAlign:"middle"}})})]})}),X=()=>{const{user:t,setList:i}=d.exports.useContext(f),a=async(n,s)=>{n.preventDefault();try{const l=await Y(o.API.link.list.post.addNewBy_userID,s,{auth:t.auth});i(p=>[...p,l])}catch(l){return console.error(l)}};return e(u,{children:r("section",{className:"p-2 border mt-5",style:{borderRadius:"10px"},children:[e("h2",{className:"fw-bold fs-5 mb-3",children:"Dodaj nowe rozliczenie"}),e("ul",{className:"list-group border p-1 mb-2",style:{overflowY:"scroll",maxHeight:"40vh",borderRadius:"10px"},children:t.friends.length?t.friends.map(n=>e(P,{user:n,action:s=>a(s,n._id)},n._id)):e("h3",{className:"fw-light fs-4 my-3 mx-2",children:"Dodaj znajomych, by m\xF3c towrzy\u0107 rozliczenia!"})})]})})},K=()=>{const[t,i]=d.exports.useState(""),[a,n]=d.exports.useState(""),[s,l]=d.exports.useState("");return e(u,{children:r("div",{className:"row my-1 py-1",children:[e("div",{className:"col-12 mb-3",children:r("select",{value:s,onChange:c=>{l(c.target.value)},className:"form-select",style:{height:"42px",borderRadius:"10px"},children:[e("option",{value:"Imi\u0119 Nazwisko",children:"Imi\u0119 Nazwisko"}),e("option",{value:"Imi\u0119 Nazwisko",children:"Imi\u0119 Nazwisko"})]})}),e("div",{className:"col-12 mb-3",children:e("input",{value:t,onChange:c=>{i(c.target.value)},type:"text",className:"form-control",placeholder:"Wydatek",style:{height:"42px",borderRadius:"10px"}})}),r("div",{className:"col-12 mb-3 input-group",children:[e("input",{value:a,onChange:c=>{n(c.target.value)},min:1,max:1e4,step:1,type:"number",className:"form-control",placeholder:"Cena",style:{height:"42px",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}}),e("span",{className:"input-group-text",style:{height:"42px",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:".00"})]}),e("div",{className:"col-12",children:r("button",{disabled:t===""||a===""||s==="",type:"button",className:"btn btn-outline-success w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(S,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Dodaj"})]})})]})})},B=({list:t})=>r(u,{children:[e("h4",{className:"lead",children:t.date.split("T")[0]}),r("div",{className:"py-1 w-100",children:[r("span",{className:"badge bg-info",style:{verticalAlign:"middle",marginRight:"10px",minWidth:"84px",height:" 32px",textAlign:"left"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"5px"},children:e(I,{})}),e("span",{style:{verticalAlign:"middle"},children:"0"})]}),e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:"https://picsum.photos/200",alt:"tmp-alt-text",style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:"Imi\u0119 Nazwisko"})]}),r("div",{className:"py-1 w-100",children:[r("span",{className:"badge bg-info",style:{verticalAlign:"middle",marginRight:"10px",minWidth:"84px",height:" 32px",textAlign:"left"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"5px"},children:e(I,{})}),e("span",{style:{verticalAlign:"middle"},children:"0"})]}),e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:"https://picsum.photos/200",alt:"tmp-alt-text",style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:"Imi\u0119 Nazwisko"})]})]}),j=()=>e(u,{children:r("figure",{className:"m-1 p-1",children:[r("blockquote",{className:"blockquote",children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:"0"}),e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:"Wydatek"})]}),e("figcaption",{className:"blockquote-footer",children:"Imi\u0119 Nazwisko"})]})}),V=({list:t})=>e(u,{children:r("div",{className:"mb-3 border p-2",style:{borderRadius:"10px"},children:[e(B,{list:t}),r("details",{className:"py-1 w-100 my-2",children:[r("summary",{className:"btn btn-outline-secondary w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(D,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Wi\u0119cej"})]}),r("div",{className:"py-1 w-100 my-4",children:[e("h5",{className:"lead",children:"Dodaj nowy wydatek"}),e(K,{})]}),r("div",{className:"py-1 w-100",children:[e("h5",{className:"lead",children:"Zapisane wydatki"}),e(j,{})]})]}),r("button",{className:"w-100 btn btn-outline-danger mt-2",type:"button",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(E,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Zako\u0144cz"})]})]})}),G=()=>{const{list:t}=d.exports.useContext(f),i=t.filter(a=>!a.status.finished);return r(u,{children:[i.map(a=>e(V,{list:a},a._id)),e(X,{})]})},J=({user:t,action:i})=>r(u,{children:[r("li",{className:"w-100 mb-2",style:{listStyle:"none"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"42px",height:"42px",borderRadius:"42px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"28px",fontWeight:"300"},children:t.body.name}),e("button",{type:"button",className:"btn btn-outline-danger py-1 px-3",onClick:a=>i(a,t._id),style:{borderRadius:"10px",float:"right"},children:e(F,{style:{verticalAlign:"middle"}})})]}),e("hr",{className:"mb-3",style:{height:"0.5px"}})]}),Q=()=>{const{user:t,setUser:i}=d.exports.useContext(f),[a,n]=d.exports.useState(""),[s,l]=d.exports.useState([]),p=async c=>{const y=c.target.value;n(y);try{if(y.length>=3){const h=await N(o.API.link.user.get.findAllBy_name+y);l(h.filter(w=>w._id!==t._id||!t.friend.includes(w)))}else l([])}catch(h){return console.error(h)}},b=async(c,y)=>{c.preventDefault();try{const h=await L(o.API.link.user.put.addNewAsFriendBy_userID,y,{auth:t.auth});t.friends=await _(h),n(""),l([])}catch(h){return console.error(h)}},m=async(c,y)=>{c.preventDefault();try{const h=await L(o.API.link.user.put.romoveUserAsFriend_userID,y,{auth:t.auth});t.friends=await _(h),n(""),l([])}catch(h){return console.error(h)}};return r(u,{children:[r("section",{className:"mb-3 w-100 p-2",children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"50px",height:" 50px",borderRadius:"50px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"32px",fontWeight:"300"},children:t.body.name}),e("hr",{}),r("div",{className:"input-group",children:[e("input",{value:a,onChange:p,type:"text",className:"form-control",placeholder:"Wyszukaj znajomego",style:{height:"42px",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}}),e("span",{className:"input-group-text",style:{height:"42px",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:e($,{})})]}),s.length?e("div",{className:"my-2",children:e("ul",{className:"list-group border p-1 mb-2",style:{overflowY:"scroll",maxHeight:"40vh",borderRadius:"10px"},children:s.map(c=>e(P,{user:c,action:b},c._id))})}):null]}),r("section",{className:"w-100 p-2",children:[e("h2",{className:"display-6",children:"Znajomi"}),t.friends.map(c=>e(J,{user:c,action:m},c._id))]})]})},ee=()=>e(u,{children:r("div",{className:"mb-3 border p-2",style:{borderRadius:"10px"},children:[e(B,{}),r("details",{className:"py-1 w-100 mt-2",children:[r("summary",{className:"btn btn-outline-secondary w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(D,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Wi\u0119cej"})]}),r("div",{className:"py-1 w-100 mt-4",children:[e("h5",{className:"lead",children:"Zapisane wydatki"}),e(j,{})]})]})]})}),te=()=>e(u,{children:e(ee,{})}),se=({view:t,setView:i,setSwipe:a})=>e(u,{children:r("nav",{className:"nav navbar-dark bg-light row p-2 w-100",id:"view-selector",children:[e("li",{className:`col-3 row mx-auto  ${t===o.views.name.saved&&"active"}`,children:r("button",{className:"mx-auto btn pb-3",onClick:()=>{i(o.views.name.saved),a(null)},children:[e(M,{style:{fontSize:"28px"}}),e("small",{children:"Zapisane"})]})}),e("li",{className:`col-3 row mx-auto ${t===o.views.name.active&&"active"}`,children:r("button",{className:"mx-auto btn pb-3",onClick:()=>{i(o.views.name.active),a(null)},children:[e(W,{style:{fontSize:"28px"}}),e("small",{children:"Aktywne"})]})}),e("li",{className:`col-3 row mx-auto ${t===o.views.name.profile&&"active"}`,children:r("button",{className:"mx-auto btn pb-3",onClick:()=>{i(o.views.name.profile),a(null)},children:[e(q,{style:{fontSize:"28px"}}),e("small",{children:"Profil"})]})})]})}),ne=()=>{const[t,i]=d.exports.useState(o.views.name.profile),[a,n]=d.exports.useState(null),s={x:null,y:null},l=m=>{s.x=m.touches[0].clientX,s.y=m.touches[0].clientY},p=m=>{if(!s.x||!s.y)return;const c=Math.min(window.innerWidth/3,300),y=.33,h=m.touches[0].clientX,w=m.touches[0].clientY,g=s.x-h,v=s.y-w;if(Math.abs(g)>Math.abs(v)){const A=g<=0?1:-1,R=Math.max(1-(Math.abs(g)-Math.abs(v))/c,0),x=A*y*(Math.abs(g)-Math.abs(v));document.querySelector("#view-content").style.transition=null,document.querySelector("#view-content").style.opacity=R,document.querySelector("#view-content").style.transform=`translateX( ${x}px )`}if(Math.abs(g)>Math.abs(v)&&Math.abs(g)-Math.abs(v)>c){const A=0,R=o.views.list.length-1,x=o.views.list.indexOf(t);g<0&&x-1>=A&&(i(o.views.list[x-1]),n("left")),g>0&&x+1<=R&&(i(o.views.list[x+1]),n("right"))}},b=m=>{document.querySelector("#view-content").style.opacity=1,document.querySelector("#view-content").style.transition="all ease-in-out 0.3s",document.querySelector("#view-content").style.transform=null};return d.exports.useEffect(()=>(document.addEventListener("touchstart",l),document.addEventListener("touchmove",p),document.addEventListener("touchend",b),()=>{document.removeEventListener("touchstart",l),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",b)}),[t]),e(u,{children:r("main",{id:"view-container",children:[r("section",{id:"view-content",className:`p-2 w-100 ${a}`,children:[t===o.views.name.saved&&e(te,{}),t===o.views.name.active&&e(G,{}),t===o.views.name.profile&&e(Q,{})]},t),e(se,{view:t,setView:i,setSwipe:n})]})})},ie=()=>{const{user:t}=d.exports.useContext(f);return e(u,{children:t?e(ne,{}):e(H,{})})};const ae=()=>e(Z,{children:e(ie,{})});O.render(e(U.StrictMode,{children:e(ae,{})}),document.getElementById("root"));
