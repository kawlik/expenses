import{r as d,j as e,a as _,F as u,b as i,d as $,c as k,e as I,f as D,g as E,h as F,i as M,k as C,l as W,m as q,R as O,n as U}from"./vendor.ee96b789.js";const T=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}};T();var o={API:{host:"https://expenses-kawlik.herokuapp.com",auth:{facebook:"https://expenses-kawlik.herokuapp.com/auth/facebook"},link:{expense:{get:{findAllBy_listID:"/expense/list/"},post:{addNewBy_listID:"/expense/add/"},put:{argueBy_expenseID:"/expense/argue/"}},list:{get:{findAllBy_userID:"/list/all/"},post:{addNewBy_userID:"/list/new/"},put:{lockBy_listID:"/list/locl/"}},user:{get:{findOneBy_auth:"/user/auth/",findAllBy_name:"/user/name/",findOneBy_userID:"/user/id/"},put:{addNewAsFriendBy_userID:"/user/add/",romoveUserAsFriend_userID:"/user/remove/"}}}},views:{list:["saved","active","profile"],name:{saved:"saved",active:"active",profile:"profile"}}};const N=d.exports.createContext(null),Z=({children:t})=>{const[n,a]=d.exports.useState(null),s={user:n,setUser:a};return d.exports.useEffect(()=>()=>{},[]),e(N.Provider,{value:s,children:t})},P=(t,n="")=>o.API.host+t+n,z=async(t,n)=>{try{const a=await _.get(P(t,n)),s=a==null?void 0:a.data;if(s==null?void 0:s.success)return s.response;throw new Error("Request could not be processed!")}catch(a){return console.error(a),null}},L=async(t,n,a)=>{try{const s=await _.put(P(t,n),a),r=s==null?void 0:s.data;if(r==null?void 0:r.success)return r.response;throw new Error("Request could not be processed!")}catch(s){return console.error(s),null}},S=async t=>{try{const n=[];for(const a of t.friends){const s=await z(o.API.link.user.get.findOneBy_userID,a);n.push(s)}return n}catch(n){return console.error(n),null}},Y=()=>{const{setUser:t}=d.exports.useContext(N),n=async a=>{try{const s=await z(o.API.link.user.get.findOneBy_auth,a);a===(s==null?void 0:s.auth)&&(s.friends=await S(s),t(s))}catch(s){return console.error(s)}};return d.exports.useEffect(()=>{const a=new URL(window.location.href),s=new URLSearchParams(a.search);s.has("auth")&&n(s.get("auth")),window.history.replaceState(null,document.title,window.location.pathname)},[]),e(u,{children:e("div",{className:"modal modal-signin position-static d-block bg-light py-5",children:e("div",{className:"modal-dialog",children:e("div",{className:"modal-content shadow",style:{borderRadius:"15px"},children:i("div",{className:"modal-body p-4",children:[e("h2",{className:"fw-bold p-2 mb-4",children:"Logowanie"}),i("a",{href:o.API.auth.facebook,className:"w-100 btn btn-outline-primary mb-2",type:"button",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e($,{style:{fontSize:"28px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Zaloguj z Facebook"})]}),e("hr",{className:"mb-3"}),e("small",{className:"text-muted",children:"Do zalogowania si\u0119 konieczne jest skorzystanie z wybranego serwisu spo\u0142eczno\u015Bciowego. Korzystanie z takiej metody logowania zwi\u0119ksza bezpiecze\u0144stwo i zmniejsza ilo\u015B\u0107 koniecznych do zapami\u0119tania hase\u0142."})]})})})})})},x=({user:t})=>e(u,{children:i("li",{className:"list-group-item",style:{borderRadius:"10px"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:"https://picsum.photos/200",alt:"tmp-alt-text",style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:"Imi\u0119 Nazwisko"})]})}),H=()=>{const[t,n]=d.exports.useState("");return e(u,{children:i("section",{className:"p-2 border",style:{borderRadius:"10px"},children:[e("h2",{className:"fw-bold fs-5 mb-3",children:"Dodaj nowe rozliczenie"}),i("ul",{className:"list-group border p-1 mb-2",style:{overflowY:"scroll",maxHeight:"40vh",borderRadius:"10px"},children:[e(x,{}),e(x,{}),e(x,{}),e(x,{}),e(x,{}),e(x,{}),e(x,{}),e(x,{})]}),i("button",{disabled:t==="",className:"w-100 btn btn-outline-success",type:"button",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(k,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Dodaj"})]})]})})},X=()=>{const[t,n]=d.exports.useState(""),[a,s]=d.exports.useState(""),[r,l]=d.exports.useState("");return e(u,{children:i("div",{className:"row my-1 py-1",children:[e("div",{className:"col-12 mb-3",children:i("select",{value:r,onChange:c=>{l(c.target.value)},className:"form-select",style:{height:"42px",borderRadius:"10px"},children:[e("option",{value:"Imi\u0119 Nazwisko",children:"Imi\u0119 Nazwisko"}),e("option",{value:"Imi\u0119 Nazwisko",children:"Imi\u0119 Nazwisko"})]})}),e("div",{className:"col-12 mb-3",children:e("input",{value:t,onChange:c=>{n(c.target.value)},type:"text",className:"form-control",placeholder:"Wydatek",style:{height:"42px",borderRadius:"10px"}})}),i("div",{className:"col-12 mb-3 input-group",children:[e("input",{value:a,onChange:c=>{s(c.target.value)},min:1,max:1e4,step:1,type:"number",className:"form-control",placeholder:"Cena",style:{height:"42px",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}}),e("span",{className:"input-group-text",style:{height:"42px",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:".00"})]}),e("div",{className:"col-12",children:i("button",{disabled:t===""||a===""||r==="",type:"button",className:"btn btn-outline-success w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(k,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Dodaj"})]})})]})})},B=()=>i(u,{children:[e("h4",{className:"lead",children:"10-10-2021"}),i("div",{className:"py-1 w-100",children:[i("span",{className:"badge bg-info",style:{verticalAlign:"middle",marginRight:"10px",minWidth:"84px",height:" 32px",textAlign:"left"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"5px"},children:e(I,{})}),e("span",{style:{verticalAlign:"middle"},children:"0"})]}),e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:"https://picsum.photos/200",alt:"tmp-alt-text",style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:"Imi\u0119 Nazwisko"})]}),i("div",{className:"py-1 w-100",children:[i("span",{className:"badge bg-info",style:{verticalAlign:"middle",marginRight:"10px",minWidth:"84px",height:" 32px",textAlign:"left"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"5px"},children:e(I,{})}),e("span",{style:{verticalAlign:"middle"},children:"0"})]}),e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:"https://picsum.photos/200",alt:"tmp-alt-text",style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:"Imi\u0119 Nazwisko"})]})]}),j=()=>e(u,{children:i("figure",{className:"m-1 p-1",children:[i("blockquote",{className:"blockquote",children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:"0"}),e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:"Wydatek"})]}),e("figcaption",{className:"blockquote-footer",children:"Imi\u0119 Nazwisko"})]})}),K=()=>e(u,{children:i("div",{className:"mb-3 border p-2",style:{borderRadius:"10px"},children:[e(B,{}),i("details",{className:"py-1 w-100 my-2",children:[i("summary",{className:"btn btn-outline-secondary w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(D,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Wi\u0119cej"})]}),i("div",{className:"py-1 w-100 my-4",children:[e("h5",{className:"lead",children:"Dodaj nowy wydatek"}),e(X,{})]}),i("div",{className:"py-1 w-100",children:[e("h5",{className:"lead",children:"Zapisane wydatki"}),e(j,{})]})]}),i("button",{className:"w-100 btn btn-outline-danger mt-2",type:"button",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(E,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Zako\u0144cz"})]})]})}),V=()=>i(u,{children:[e(K,{}),e(H,{})]}),G=({user:t,action:n})=>i(u,{children:[i("li",{className:"w-100 mb-2",style:{listStyle:"none"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"42px",height:"42px",borderRadius:"42px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"28px",fontWeight:"300"},children:t.body.name}),e("button",{type:"button",className:"btn btn-outline-danger py-1 px-3",onClick:a=>n(a,t._id),style:{borderRadius:"10px",float:"right"},children:e(F,{style:{verticalAlign:"middle"}})})]}),e("hr",{className:"mb-3",style:{height:"0.5px"}})]}),J=({user:t,action:n})=>e(u,{children:i("li",{className:"list-group-item",style:{borderRadius:"10px"},children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"32px",height:" 32px",borderRadius:"32px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"20px",fontWeight:"300"},children:t.body.name}),e("button",{type:"button",className:"btn btn-outline-success py-1 px-3",onClick:a=>n(a,t._id),style:{borderRadius:"10px",float:"right"},children:e(k,{style:{verticalAlign:"middle"}})})]})}),Q=()=>{const{user:t,setUser:n}=d.exports.useContext(N),[a,s]=d.exports.useState(""),[r,l]=d.exports.useState([]),p=async c=>{const y=c.target.value;s(y);try{if(y.length>=3){const h=await z(o.API.link.user.get.findAllBy_name+y);l(h.filter(w=>w._id!==t._id||!t.friend.includes(w)))}else l([])}catch(h){return console.error(h)}},b=async(c,y)=>{c.preventDefault();try{const h=await L(o.API.link.user.put.addNewAsFriendBy_userID,y,{auth:t.auth});t.friends=await S(h),s(""),l([]),n(t)}catch(h){return console.error(h)}},m=async(c,y)=>{c.preventDefault();try{const h=await L(o.API.link.user.put.romoveUserAsFriend_userID,y,{auth:t.auth});t.friends=await S(h),s(""),l([]),n(t)}catch(h){return console.error(h)}};return i(u,{children:[i("section",{className:"mb-3 w-100 p-2",children:[e("span",{style:{verticalAlign:"middle",marginRight:"10px"},children:e("img",{src:t.body.picture,alt:t.body.name,style:{width:"50px",height:" 50px",borderRadius:"50px"}})}),e("span",{style:{verticalAlign:"middle",fontSize:"32px",fontWeight:"300"},children:t.body.name}),e("hr",{}),i("div",{className:"input-group",children:[e("input",{value:a,onChange:p,type:"text",className:"form-control",placeholder:"Wyszukaj znajomego",style:{height:"42px",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}}),e("span",{className:"input-group-text",style:{height:"42px",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:e(M,{})})]}),e("div",{className:"my-2",children:e("ul",{className:"list-group border p-1 mb-2",style:{overflowY:"scroll",maxHeight:"40vh",borderRadius:"10px"},children:r.map(c=>e(J,{user:c,action:b},c._id))})})]}),i("section",{className:"w-100 p-2",children:[e("h2",{className:"display-6",children:"Znajomi"}),t.friends.map(c=>e(G,{user:c,action:m},c._id))]})]})},ee=()=>e(u,{children:i("div",{className:"mb-3 border p-2",style:{borderRadius:"10px"},children:[e(B,{}),i("details",{className:"py-1 w-100 mt-2",children:[i("summary",{className:"btn btn-outline-secondary w-100",style:{height:"42px",borderRadius:"10px"},children:[e("span",{style:{marginRight:"10px",verticalAlign:"middle"},children:e(D,{style:{fontSize:"24px"}})}),e("span",{style:{verticalAlign:"middle"},children:"Wi\u0119cej"})]}),i("div",{className:"py-1 w-100 mt-4",children:[e("h5",{className:"lead",children:"Zapisane wydatki"}),e(j,{})]})]})]})}),te=()=>e(u,{children:e(ee,{})}),ie=({view:t,setView:n,setSwipe:a})=>e(u,{children:i("nav",{className:"nav navbar-dark bg-light row p-2 w-100",id:"view-selector",children:[e("li",{className:`col-3 row mx-auto  ${t===o.views.name.saved&&"active"}`,children:i("button",{className:"mx-auto btn pb-3",onClick:()=>{n(o.views.name.saved),a(null)},children:[e(C,{style:{fontSize:"28px"}}),e("small",{children:"Zapisane"})]})}),e("li",{className:`col-3 row mx-auto ${t===o.views.name.active&&"active"}`,children:i("button",{className:"mx-auto btn pb-3",onClick:()=>{n(o.views.name.active),a(null)},children:[e(W,{style:{fontSize:"28px"}}),e("small",{children:"Aktywne"})]})}),e("li",{className:`col-3 row mx-auto ${t===o.views.name.profile&&"active"}`,children:i("button",{className:"mx-auto btn pb-3",onClick:()=>{n(o.views.name.profile),a(null)},children:[e(q,{style:{fontSize:"28px"}}),e("small",{children:"Profil"})]})})]})}),se=()=>{const[t,n]=d.exports.useState(o.views.name.profile),[a,s]=d.exports.useState(null),r={x:null,y:null},l=m=>{r.x=m.touches[0].clientX,r.y=m.touches[0].clientY},p=m=>{if(!r.x||!r.y)return;const c=Math.min(window.innerWidth/3,300),y=.33,h=m.touches[0].clientX,w=m.touches[0].clientY,g=r.x-h,v=r.y-w;if(Math.abs(g)>Math.abs(v)){const R=g<=0?1:-1,A=Math.max(1-(Math.abs(g)-Math.abs(v))/c,0),f=R*y*(Math.abs(g)-Math.abs(v));document.querySelector("#view-content").style.transition=null,document.querySelector("#view-content").style.opacity=A,document.querySelector("#view-content").style.transform=`translateX( ${f}px )`}if(Math.abs(g)>Math.abs(v)&&Math.abs(g)-Math.abs(v)>c){const R=0,A=o.views.list.length-1,f=o.views.list.indexOf(t);g<0&&f-1>=R&&(n(o.views.list[f-1]),s("left")),g>0&&f+1<=A&&(n(o.views.list[f+1]),s("right"))}},b=m=>{document.querySelector("#view-content").style.opacity=1,document.querySelector("#view-content").style.transition="all ease-in-out 0.3s",document.querySelector("#view-content").style.transform=null};return d.exports.useEffect(()=>(document.addEventListener("touchstart",l),document.addEventListener("touchmove",p),document.addEventListener("touchend",b),()=>{document.removeEventListener("touchstart",l),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",b)}),[t]),e(u,{children:i("main",{id:"view-container",children:[i("section",{id:"view-content",className:`p-2 w-100 ${a}`,children:[t===o.views.name.saved&&e(te,{}),t===o.views.name.active&&e(V,{}),t===o.views.name.profile&&e(Q,{})]},t),e(ie,{view:t,setView:n,setSwipe:s})]})})},ne=()=>{const{user:t}=d.exports.useContext(N);return e(u,{children:t?e(se,{}):e(Y,{})})};const ae=()=>e(Z,{children:e(ne,{})});O.render(e(U.StrictMode,{children:e(ae,{})}),document.getElementById("root"));
